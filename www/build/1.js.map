{"version":3,"sources":["../../src/pages/new-contract/new-contract.module.ts","../../src/pages/new-contract/models/session.ts","../../src/pages/new-contract/new-contract.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AAUjD;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QARjC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,sEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;aAC1C;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;ACZlC;AAAA;IAQE;QACE,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACnC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,mCAAiB,GAAjB;QACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;IAC1D,CAAC;IAED,2BAAS,GAAT,UAAU,OAAO;QACf,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;IAEH,cAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACrByC;AACgC;AACnB;AACZ;AAEF;AAEzC;;;;;GAKG;AAOH;IAeE,yBAAmB,OAAsB,EAAS,SAAoB,EAAS,OAAgB,EAAS,SAA0B;QAAlI,iBAoCC;QApCkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,cAAS,GAAT,SAAS,CAAiB;QAblI,oBAAe,GAAY,IAAI,CAAC;QAChC,qBAAgB,GAAY,KAAK,CAAC;QAMlC,SAAI,GAAU,EAAE,CAAC;QAEjB,WAAM,GAAY,KAAK,CAAC;QAKtB,IAAI,CAAC,OAAO,GAAG,IAAI,gEAAO,EAAE,CAAC;QAE7B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;YACrC,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;QAGH,yEAAc,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,EAAG,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAE3F,yEAAc,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,OAAO;YAC1C,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,EAAZ,CAAY,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,yEAAc,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,QAAQ;YAC3C,KAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;YAExB,EAAE,EAAC,KAAI,CAAC,aAAa,IAAI,UAAU,CAAC,EAAC;gBACnC,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,yEAAc,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,QAAQ;YAC5C,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAC1B,KAAI,CAAC,MAAM,GAAG,yCAAyC,CAAC;QAC1D,CAAC,CAAC,CAAC;QAEH,yEAAc,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAC,MAAM;YACxC,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,CAAC,CAAC;QAEF,yEAAc,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,UAAC,KAAK;YAC7C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC,CAAC;IACJ,CAAC;IAED,6CAAmB,GAAnB;QACE,GAAG,EAAc,UAAuB,EAAvB,SAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAvB,cAAuB,EAAvB,IAAuB;YAApC,IAAI,KAAK;YACX,EAAE,EAAC,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,EAAC;gBACzB,IAAI,IAAI,GAAG,EAAE;gBAEb,GAAG,EAAgB,UAAY,EAAZ,UAAK,CAAC,MAAM,EAAZ,cAAY,EAAZ,IAAY;oBAA3B,IAAI,OAAO;oBACb,IAAI,CAAC,IAAI,WAAE,GAAC,OAAO,CAAC,IAAI,IAAG,OAAO,CAAC,IAAI,MAAE;iBAC1C;gBAED,IAAI,CAAC,IAAI,CAAC,IAAI,WAAE,GAAC,KAAK,CAAC,IAAI,IAAG,IAAI,MAAE,CAAC;YACvC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,IAAI,CAAC,IAAI,WAAE,GAAC,KAAK,CAAC,IAAI,IAAG,KAAK,CAAC,IAAI,MAAE,CAAC;YAC7C,CAAC;SACF;QACD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;;IACnB,CAAC;IAED,0CAAgB,GAAhB;QACE,yEAAc,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC7B,CAAC;IAED,sCAAY,GAAZ;QACE,yEAAc,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC5D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,CAAC;IAED,+CAAqB,GAArB;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE/C,yEAAc,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IAC1B,CAAC;IAED,qCAAW,GAAX;QACE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;IAC1C,CAAC;IAED,mCAAS,GAAT,UAAU,OAAO;QACf,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;IAC/B,CAAC;IAED,wCAAc,GAAd,UAAe,OAAO;QACpB,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,cAAc;YACrB,QAAQ,EAAE,OAAO;YACjB,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAvGU,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;WACG;SACjC,CAAC;wBAgBkI;OAfvH,eAAe,CAwG3B;IAAD,CAAC;AAAA;SAxGY,eAAe,gB","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NewContractPage } from './new-contract';\n\n@NgModule({\n  declarations: [\n    NewContractPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NewContractPage)\n  ],\n})\nexport class NewContractPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-contract/new-contract.module.ts","export class Session {\n\n  id: string;\n  preset: any;\n  members: any;\n  data: any;\n  contract: any;\n\n  constructor() {\n    this.id = this.generateSessionID();\n    this.members = [];\n  }\n\n  generateSessionID(){\n    return Math.floor(100000 + Math.random() * 900000) + \"\";\n  }\n\n  addMember(_member){\n    this.members.push(_member);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-contract/models/session.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController} from 'ionic-angular';\nimport { SocketProvider } from '../../providers/socket'\nimport { Session } from \"./models/session\";\nimport { Preset } from \"./models/preset\";\nimport { Storage } from '@ionic/storage';\n\n/**\n * Generated class for the NewContractPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-new-contract',\n  templateUrl: 'new-contract.html'\n})\nexport class NewContractPage {\n\n  showInputScreen: boolean = true;\n  showInviteScreen: boolean = false;\n\n  presets: Preset[];\n  session: Session;\n\n  member: any;\n  data: any[] = [];\n  currentScreen: any;\n  signed: boolean = false;\n  status: any;\n\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public storage: Storage, public alertCtrl: AlertController) {\n    this.session = new Session();\n\n    this.storage.get('member').then((member) => {\n      this.member = member;\n      this.setScreen(\"input\");\n    });\n\n\n    SocketProvider.socket.emit(\"createSession\", { id: this.session.id,  member: this.member });\n\n    SocketProvider.socket.on('presets', (presets) => {\n      this.presets = Object.keys(presets).map(key => presets[key]);\n    });\n\n    SocketProvider.socket.on('session', (_session) => {\n      this.session = _session;\n\n      if(this.currentScreen == \"contract\"){\n        console.log(this.session);\n      }\n    });\n\n    SocketProvider.socket.on('contract', (contract) => {\n      this.setScreen(\"loading\");\n      this.status = \"Wachten op medepartijen op ondertekenen\";\n    });\n\n    SocketProvider.socket.on('status', (status) => {\n      this.status = status;\n    })\n\n    SocketProvider.socket.on('errorMessage', (error) => {\n      console.log(error);\n      this.showErrorAlert(error);\n    })\n  }\n\n  collectRequiredData(){\n    for(let field of this.member.role.fields){\n      if(field.type == \"object\"){\n        let temp = []\n\n        for(let inField of field.fields){\n          temp.push({[inField.name]: inField.data})\n        }\n\n        this.data.push({[field.name]: temp});\n      } else {\n        this.data.push({[field.name]: field.data});\n      }\n    }\n    return this.data;\n  }\n\n  generateContract(){\n    SocketProvider.socket.emit(\"generateContract\", this.session.id);\n    this.setScreen(\"contract\");\n  }\n\n  signContract(){\n    SocketProvider.socket.emit(\"signContract\", this.session.id);\n    this.signed = true;\n  }\n\n  createSessionListener() {\n    this.session.members = [this.member];\n    this.session.data = this.collectRequiredData();\n\n    SocketProvider.socket.emit(\"updateSession\", this.session);\n    this.setScreen(\"lobby\");\n  }\n\n  memberCount(){\n    return this.session.members.length || 0;\n  }\n\n  setScreen(_screen){\n    this.currentScreen = _screen;\n  }\n\n  showErrorAlert(message) {\n    const alert = this.alertCtrl.create({\n      title: 'Foutmelding!',\n      subTitle: message,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-contract/new-contract.ts"],"sourceRoot":""}